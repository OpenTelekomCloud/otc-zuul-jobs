- job:
    name: openstack-tox
    abstract: true
    parent: tox
    description: |
      Base job to run tox jobs with OpenStack project specific updates.
      Processing upper-constraints files from openstack/requirements.

- job:
    name: otc-tox-functional
    parent: openstack-tox
    description: |
      Run tox-based functional tests for an OpenStack Python project.
      Uses tox with the ``functional`` environment.
    irrelevant-files:
      - ^.*\.rst$
      - ^api-ref/.*$
      - ^doc/.*$
      - ^releasenotes/.*$
    vars:
      tox_envlist: functional

- job:
  name: shade-ansible-functional
  parent: opentack-tox
  description: |
    Run Shade ansible tests
  vars:
    tox_envlist: ansible

- job:
  name: shade-ansible-functional-otc
  parent: shade-ansible-functional
  description: |
    Run Shade Ansible tests against OTC
  required-projects:
    - github.com/openstack-infra/shade
  vars:
    tox_extra_args: '-c otc auth network'
