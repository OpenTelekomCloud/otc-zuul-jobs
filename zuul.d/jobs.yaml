#- job:
#    name: openstack-tox
#    abstract: true
#    parent: tox
#    description: |
#      Base job to run tox jobs with OpenStack project specific updates.
#      Processing upper-constraints files from openstack/requirements.
#
#- job:
#    name: otc-tox-functional
#    parent: openstack-tox
#    description: |
#      Run tox-based functional tests for an OpenStack Python project.
#      Uses tox with the ``functional`` environment.
#    irrelevant-files:
#      - ^.*\.rst$
#      - ^api-ref/.*$
#      - ^doc/.*$
#      - ^releasenotes/.*$
#    vars:
#      tox_envlist: functional
#
#- job:
#    name: shade-ansible-functional
#    parent: openstack-tox
#    description: |
#      Run Shade ansible tests
#    vars:
#      tox_envlist: ansible
#
#- job:
#    name: openstacksdk-ansible-functional
#    parent: openstack-tox
#    description: |
#      Run OpenstackSDK ansible tests
#    vars:
#      tox_envlist: ansible
#
#- job:
#    name: shade-ansible-functional-otc
#    parent: shade-ansible-functional
#    description: |
#      Run Shade Ansible tests against OTC
#    branches: ^(devel|master)$
#    required-projects:
#      - name: github.com/ansible/ansible
#        override-checkout: stable-2.5
#      - name: openstack-infra/shade
#        override-checkout: master
#    vars:
#      test_matrix_branch: master
#      tox_extra_args: '-- -c otc auth client_config image keypair network object security_group volume'
#
#- job:
#    name: openstacksdk-ansible-functional-otc
#    parent: openstacksdk-ansible-functional
#    description: |
#      Run Shade Ansible tests against OTC
#    branches: ^(devel|master)$
#    required-projects:
#      - name: github.com/ansible/ansible
#        override-checkout: devel
#      - name: openstack/openstacksdk
#        override-checkout: master
#    vars:
#      test_matrix_branch: master
#      tox_extra_args: '-- -c otc auth client_config image keypair network object security_group volume'

- job:
    name: refstack-client-run
    parent: unittests
    attempts: 1
    required-projects:
      - opendev.org/openstack/refstack-client
    pre-run: playbooks/refstack-client/pre.yaml
    run: playbooks/refstack-client/run.yaml
    post-run: playbooks/refstack-client/post.yaml
    nodeset:
      nodes:
        - name: refstack
          label: debian-buster
    vars:
      tempest_tests_url: https://refstack.openstack.org/api/v1/guidelines/2019.11/tests?target=platform&type=required&alias=true&flag=false
    secrets:
      - refstack_credentials
      - alerta_data
